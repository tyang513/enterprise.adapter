/** https://github.com/martinkr/jQuery.channel - Copyright (c) 2011-2012 Martin Krause - Dual licensed under the MIT and GPL licenses. */
/* jshint browser:true, jquery:true, strict: false, smarttabs:true, onevar:true, asi:true */
/* global jQuery:true, -$:true */
(function(c){var b={},a=[],d={_normalize:function(e){return(e.lastIndexOf("/")===e.length-1)?e.slice(0,-1):e},_setWildcard:function(e){if(e.indexOf("*")!==-1&&c.inArray(e,a)===-1){a.push(e)}},_unsetWildcard:function(f){var e=c.inArray(f,a);if(f.indexOf("*")!==-1&&e!==-1){a.splice(e,1)}},_filterCallbacks:function(h){var g,e=[],f;if(b[h]){e.push(h)}for(g=0;g<a.length;g++){f=new RegExp("^"+a[g],"g");if(f.test(h)){e.push(a[g])}}return e},_normalizeCustomData:function(e,g,f){return{data:f,channel:g,originalChannel:e}},subscribe:function(f,e){f=d._normalize(f);d._setWildcard(f);if(!b[f]){b[f]=c.Callbacks("unique")}b[f].add(e);return this},unsubscribe:function(f,e){f=d._normalize(f);d._unsetWildcard(f);if(b[f]&&b[f].has(e)){b[f].remove(e)}return this},publish:function(i,h,e){var g,f=d._filterCallbacks(i);i=d._normalize(i);for(g=0;g<f.length;g++){b[f[g]].fireWith(e||this,[d._normalizeCustomData(i,f[g],h)])}return this}};c.channel=c.fn.channel=function(e){if(d[e]){return d[e].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof e==="object"||!e){return d.init.apply(this,arguments)}else{c.error("Method "+e+" does not exist on jQuery.channel")}}}})(jQuery);